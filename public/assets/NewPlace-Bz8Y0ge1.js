import{r as x,A as v,u as f,j as e,a as h}from"./index-CkTn6Lmz.js";import{u as I,I as r,V as i,a as j}from"./form-hook-aLdVfINw.js";import{u as A,E as g,B as E}from"./http-hook-wdNFrn97.js";/* empty css                  */import{I as T}from"./ImageUpload-BvQX2PhG.js";const L=()=>{const l=x.useContext(v),{isLoading:n,error:o,sendRequest:d,clearError:p}=A(),[t,s]=I({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1),u=f(),m=async c=>{c.preventDefault();try{const a=new FormData;a.append("title",t.inputs.title.value),a.append("description",t.inputs.description.value),a.append("address",t.inputs.address.value),a.append("image",t.inputs.image.value),await d("http://localhost:5000/api/places/","POST",a,{Authorization:"Bearer "+l.token}),u.push("/")}catch{}};return e.jsxs(e.Fragment,{children:[e.jsx(g,{error:o,onClear:p}),e.jsxs("form",{className:"place-form",onSubmit:m,children:[n&&e.jsx(h,{asOverlay:!0}),e.jsx(r,{id:"title",element:"input",type:"text",label:"Title",validators:[i()],errorText:"Please enter a valid title.",onInput:s}),e.jsx(r,{id:"description",element:"textarea",label:"Description",validators:[j(5)],errorText:"Please enter a valid description (at least 5 characters).",onInput:s}),e.jsx(r,{id:"address",element:"input",label:"Address",validators:[i()],errorText:"Please enter a valid address.",onInput:s}),e.jsx(T,{id:"image",onInput:s,errorText:"Please provide an image"}),e.jsx(E,{type:"submit",disabled:!t.isValid,children:"ADD PLACE"})]})]})};export{L as default};
