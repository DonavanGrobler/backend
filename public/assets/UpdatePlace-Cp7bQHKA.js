import{r as l,u as v,A as V,b as E,j as e,a as I}from"./index-CkTn6Lmz.js";import{u as y,I as m,V as A,a as C}from"./form-hook-aLdVfINw.js";import{u as D,E as P,B as T}from"./http-hook-wdNFrn97.js";import{C as b}from"./Card-YHaYoNZJ.js";/* empty css                  */const g=()=>{const{isLoading:n,error:o,sendRequest:s,clearError:h}=D(),[a,x]=l.useState(),f=v(),c=l.useContext(V),r=E().placeId,[i,d,p]=y({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1);l.useEffect(()=>{(async()=>{try{const t=await s(`http://localhost:5000/api/places/${r}`);x(t.place),p({title:{value:t.place.title,isValid:!0},description:{value:t.place.description,isValid:!0}},!0)}catch{}})()},[s,r,p]);const j=async u=>{u.preventDefault();try{await s(`http://localhost:5000/api/places/${r}`,"PATCH",JSON.stringify({title:i.inputs.title.value,description:i.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+c.token}),f.push("/"+c.userId+"/places")}catch{}};return!a&&!o?e.jsx("div",{className:"center",children:e.jsx(b,{children:e.jsx("h2",{children:"Could not find place!"})})}):n?e.jsx("div",{className:"center",children:e.jsx(I,{})}):e.jsxs(e.Fragment,{children:[e.jsx(P,{error:o,onClear:h}),!n&&a&&e.jsxs("form",{className:"place-form",onSubmit:j,children:[e.jsx(m,{id:"title",element:"input",type:"text",label:"Title",validators:[A()],errorText:"Please enter a valid title.",onInput:d,initialValue:a.title,initialValid:i.inputs.title.isValid}),e.jsx(m,{id:"description",element:"textarea",label:"Description",validators:[C(5)],errorText:"Please enter a valid description (min. 5 characters).",onInput:d,initialValue:a.description,initialValid:!0}),e.jsx(T,{type:"submit",disabled:!i.isValid,children:"UPDATE PLACE"})]})]})};export{g as default};
